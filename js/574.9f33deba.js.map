{"version":3,"file":"js/574.9f33deba.js","mappings":"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","sources":["webpack://sanyue_imghub/./src/components/BaseLogin.vue","webpack://sanyue_imghub/./src/components/BaseLogin.vue?6c60","webpack://sanyue_imghub/./src/views/Login.vue","webpack://sanyue_imghub/./src/views/Login.vue?240b"],"sourcesContent":["<template>\n    <v-container fluid class=\"fill-height login pa-0\">\n        <ToggleDark class=\"toggle-dark\"/>\n        <Logo class=\"logo-pos\"/>\n        \n        <v-row align=\"center\" justify=\"center\" class=\"fill-height ma-0\">\n            <v-col cols=\"12\" sm=\"8\" md=\"6\" lg=\"4\" xl=\"3\">\n                <v-card class=\"login-card elevation-24 px-6 py-8\" rounded=\"xl\">\n                    <div class=\"text-center mb-6\">\n                        <h1 class=\"text-h4 font-weight-bold primary--text login-title\">{{ title }}</h1>\n                    </div>\n\n                    <v-form @submit.prevent=\"handleSubmit\">\n                        <div v-for=\"(field, index) in fields\" :key=\"field.key\" class=\"mb-4\">\n                            <v-text-field\n                                v-model=\"formData[field.key]\"\n                                :label=\"field.label\"\n                                :placeholder=\"field.placeholder\"\n                                :type=\"field.type || 'text'\"\n                                :append-inner-icon=\"field.icon === 'Lock' ? 'mdi-lock' : undefined\"\n                                variant=\"outlined\"\n                                color=\"primary\"\n                                density=\"comfortable\"\n                                :loading=\"loading\"\n                                rounded=\"lg\"\n                                class=\"login-input\"\n                                bg-color=\"surface\"\n                            >\n                            </v-text-field>\n                        </div>\n\n                        <v-btn\n                            block\n                            color=\"primary\"\n                            size=\"x-large\"\n                            rounded=\"lg\"\n                            elevation=\"4\"\n                            class=\"mt-6 text-capitalize font-weight-bold tracking-wide\"\n                            :loading=\"loading\"\n                            type=\"submit\"\n                        >\n                            {{ submitText }}\n                        </v-btn>\n                    </v-form>\n                </v-card>\n            </v-col>\n        </v-row>\n        <Footer class=\"footer\"/>\n    </v-container>\n</template>\n\n<script>\nimport Footer from '@/components/Footer.vue';\nimport ToggleDark from '@/components/ToggleDark.vue';\nimport Logo from '@/components/Logo.vue';\nimport { mapGetters } from 'vuex';\nimport backgroundManager from '@/mixins/backgroundManager';\n\nexport default {\n    name: 'BaseLogin',\n    mixins: [backgroundManager],\n    props: {\n        title: { type: String, required: true },\n        fields: { type: Array, required: true },\n        submitText: { type: String, default: '登录' },\n        backgroundKey: { type: String, required: true },\n        isAdmin: { type: Boolean, default: false },\n        loading: { type: Boolean, default: false }\n    },\n    data() {\n        return {\n            formData: {},\n        }\n    },\n    computed: {\n        ...mapGetters(['userConfig']),\n    },\n    components: {\n        Footer,\n        ToggleDark,\n        Logo\n    },\n    created() {\n        this.initFormData();\n    },\n    mounted() {\n        this.initializeBackground(this.backgroundKey, '.login', !this.isAdmin, true);\n    },\n    methods: {\n        initFormData() {\n            const newFormData = {};\n            this.fields.forEach(field => {\n                newFormData[field.key] = '';\n            });\n            this.formData = newFormData;\n        },\n        handleSubmit() {\n            if (this.loading) return;\n            this.$emit('submit', { ...this.formData });\n        }\n    }\n}\n</script>\n\n<style scoped>\n.login {\n    position: relative;\n    background-size: cover;\n    background-position: center;\n    transition: background 0.5s ease;\n}\n\n.login-card {\n    background: rgba(var(--v-theme-surface), 0.85) !important;\n    backdrop-filter: blur(20px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.login-title {\n    font-family: 'Righteous', sans-serif;\n    letter-spacing: 1px;\n    background: linear-gradient(45deg, var(--v-theme-primary), var(--v-theme-secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n.toggle-dark {\n    position: fixed;\n    top: 24px;\n    right: 24px;\n    z-index: 100;\n}\n\n.logo-pos {\n    position: fixed;\n    top: 24px;\n    left: 24px;\n    z-index: 100;\n}\n\n.footer {\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n}\n</style>\n","import { render } from \"./BaseLogin.vue?vue&type=template&id=ac56c014&scoped=true\"\nimport script from \"./BaseLogin.vue?vue&type=script&lang=js\"\nexport * from \"./BaseLogin.vue?vue&type=script&lang=js\"\n\nimport \"./BaseLogin.vue?vue&type=style&index=0&id=ac56c014&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ac56c014\"]])\n\nexport default __exports__","<template>\n    <BaseLogin\n        :title=\"loginTitle\"\n        :fields=\"loginFields\"\n        submit-text=\"登录\"\n        background-key=\"loginBkImg\"\n        :is-admin=\"false\"\n        :loading=\"isLoading\"\n        @submit=\"handleLogin\"\n    />\n</template>\n\n<script>\nimport cookies from 'vue-cookies'\nimport axios from '@/utils/axios'\nimport { mapGetters } from 'vuex'\nimport BaseLogin from '@/components/BaseLogin.vue'\n\nexport default {\n    data() {\n        return {\n            isLoading: false,\n            loginFields: [\n                {\n                    key: 'password',\n                    label: '密码',\n                    placeholder: '请输入认证码',\n                    type: 'password',\n                    showPassword: true,\n                    icon: 'Lock'\n                }\n            ]\n        }\n    },\n    computed: {\n        ...mapGetters(['userConfig']),\n        ownerName() {\n            return this.userConfig?.ownerName || 'Sanyue'\n        },\n        loginTitle() {\n            return `登录到 ${this.ownerName} 图床`\n        }\n    },\n    components: {\n        BaseLogin\n    },\n    methods: {\n        async handleLogin(formData) {\n            const { password } = formData;\n            const writtenPass = password === '' ? 'unset' : password;\n            \n            this.isLoading = true;\n            \n            const minDelayPromise = new Promise(resolve => setTimeout(resolve, 500));\n            const loginPromise = axios.post('/api/login', {\n                authCode: password\n            }).then(res => ({ res })).catch(err => ({ err }));\n\n            try {\n                const [result] = await Promise.all([loginPromise, minDelayPromise]);\n                \n                if (result.res && result.res.status === 200) {\n                    cookies.set('authCode', writtenPass, '14d')\n                    this.$router.push('/')\n                    this.$message.success('登录成功')\n                    // Keep loading true to show animation relative to redirect\n                } else {\n                    this.isLoading = false;\n                    this.$message.error('登录失败，请检查密码是否正确')\n                }\n            } catch (err) {\n                this.isLoading = false;\n                this.$message.error('系统错误')\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n</style>","import { render } from \"./Login.vue?vue&type=template&id=76102d34\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createBlock","_component_v_container","fluid","_createVNode","_component_ToggleDark","_component_Logo","_component_v_row","align","justify","_component_v_col","cols","sm","md","lg","xl","_component_v_card","rounded","_createElementVNode","_hoisted_1","_hoisted_2","_toDisplayString","$props","title","_component_v_form","onSubmit","_withModifiers","$options","handleSubmit","_createElementBlock","_Fragment","_renderList","fields","field","index","key","_component_v_text_field","$data","formData","$event","label","placeholder","type","icon","undefined","variant","color","density","loading","_component_v_btn","block","size","elevation","submitText","_component_Footer","name","mixins","backgroundManager","props","String","required","Array","default","backgroundKey","isAdmin","Boolean","data","computed","mapGetters","components","Footer","ToggleDark","Logo","created","this","initFormData","mounted","initializeBackground","methods","newFormData","forEach","$emit","__exports__","render","_component_BaseLogin","loginTitle","loginFields","isLoading","handleLogin","showPassword","ownerName","userConfig","BaseLogin","password","writtenPass","minDelayPromise","Promise","resolve","setTimeout","loginPromise","axios","post","authCode","then","res","catch","err","result","all","status","cookies","$router","push","$message","success","error"],"ignoreList":[],"sourceRoot":""}